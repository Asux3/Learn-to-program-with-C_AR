\chapter{الشروط}

لقد رأينا فيما سبق بأن هناك العديد من لغات البرمجة. بعضها متشابه : الكثير منها مستلهم من الـ\textenglish{C}.

في الواقع، لغة  الـ\textenglish{C}
أُنشئت منذ زمن طويل، و هذا جعلها نموذجا للّغات الجديدة.

لغات البرمجة تختلف في بعض الأمور، لكن هناك مبادئ لا يمكن أن تخلو منها أية لغة برمجية. لقد رأينا كيف ننشؤ المتغيّرات، كيف نقوم بالحسابات، و الآن سنمرّ إلى 
\textbf{الشروط}.\\
من دون استعمال الشروط، برامجنا ستقوم دائما بنفس العمل !

\section{الشرط
\texttt{if \dots else}}

الشروط تسمح لنا بأن نقوم باختبارات على المتغيرات. مثلا يمكننا القول، "إن كان المتغيّر 
\InlineCode{machine}
يساوي 50، يجب أن نقوم بكذا و كذا. و لكن من المؤسف عدم إمكانية اختبار سوى المساواة ! يجب أيضا اختبار ما إن كان المتغيّر، أقل من 50، أقل أو يساوي 50، أكبر، أكبر أو يساوي
\dots
لا تقلق، في الـ\textenglish{C}
كل شيء مُعَد !

لدراسة الشرط 
\InlineCode{if \dots else}
يجب أن نتبع المخطط التالي :
\begin{itemize}
\item نتعلم بعض الرموز قبل البدأ،
\item الشرط 
\InlineCode{if}،
\item الشرط 
\InlineCode{else}،
\item الشرط
\InlineCode{else if}،
\item كثير من الشروط في مرة واحدة،
\item بعض الأخطاء لنتجنبها.
\end{itemize}

قبل أن نرى كيف نكتب شرطا من النوع
\InlineCode{if \dots else}
في الـ\textenglish{C}، يجب أن تعرف ثلاثة رموز أساسية. هذه الرموز ضرورية لإنشاء الشروط.

\subsection{بعض الرموز للتعلّم}

الجدول التالي يحوي رموز لغة الـ\textenglish{C} الّتي
\textbf{يجب حفظها عن ظهر قلب} :

\begin{Table}{2}
\texttt{{=}{=}} & يساوي\\
\texttt{>} & أكبر\\
\texttt{<} & أصغر\\
\texttt{<=} & أصغر أو يساوي\\
\texttt{>=} & أكبر أو يساوي\\
\texttt{!=} & لا يساوي\\
\end{Table}

\begin{critical}
انتبه جيدا، هناك رمزا مساواة
\InlineCode{{=}{=}}
لنقوم باختبار المساواة. فالمبتدؤون يقومون غالبا باقتراف خطأ وضع إشارة واحدة
\InlineCode{=}،
و هذا لديه معنى مختلف في الـ\textenglish{C}. سأذكّرك بهذا لاحقا.
\end{critical}

\subsection{\texttt{if} بسيط}

فلنبدأ، لنقم باختبار بسيط، يقول للحاسوب : إن كان المتغير يساوي كذا فلنقم بكذا.

في الإنجليزيّة، كلمة "إذا" تُتَرجم إلى
\InlineCode{if}.
و هذا ما الّذي نستخدمه في لغة الـ\textenglish{C} لإنشاء اختبار.\\
أكتب إذن
\InlineCode{if}
ثم الأقواس و في داخلها الشرط.

بعد ذلك افتح حاضنة
\InlineCode{\{}
و اغلقها لاحقا
\InlineCode{\}}.
كلّ ما يوجد بين الحاضنتين سيتمّ تشغيله فقط في حالة تحقق الشرط.

هذا يعطينا إذن :
\begin{Csource}
if (/* Your condition */)
{
	// Instructions to execute
}
\end{Csource}

في مكان التعليق
"\textenglish{Your condition}"
سنكتب شرطا للتحقّق من متغيّر.\\
كمثال سنحاول أن نقوم بختبار متغيّر
\InlineCode{age}
لاحتواء العمر. سنختبر ما إن كان المستعمل راشدا أم قاصرا استنادا إلى 
\textbf{إذا ما كان عمره يساوي أو أكبر من 18} :

\begin{Csource}
if (age >= 18)
{
	printf("You are major !");
}
\end{Csource}

\InlineCode{>=}
يعني "أكبر أو يساوي"، كما رأينا في الجدول السابق.

\begin{information}
عندما لا يكون هناك سوى تعليمة واحدة بين الحاضنتين، يمكننا أن نتخلى عنهما. لكني أفضل أن تضعوما دائما من اجل قراءة أفضل للشفرة.
\end{information}

\subsubsection{جرّب هذه الشفرة}
لكي نجرّب الشفرات السابقة و نفهم كيف يعمل الـ\InlineCode{if}، يجب أن نضعه داخل الدالة
\InlineCode{main}
و لا ننس التصريح بالمتغير 
\InlineCode{age}
و إعطاؤه قيمة ابتدائية.

هذا قد يبدو بديهيّا للبعض، و لكنّ كثيرا من القرّاء قد ضاعوا في هذه الأسطر و هذا ما دفعني لإضافة هذا الشرح. هذه شفرة كاملة يمكنك تجريبها :

\begin{Csource}
#include <stdio.h>
#include <stdlib.h>
int main(int argc, char *argv[])
{
	int age = 20;
	
	if (age >= 18)
	{
		printf("You are major !\n");
	}
	return 0;
}
\end{Csource}

هنا،
\InlineCode{age}
يساوي 20 إذن سيتم عرض
"\textenglish{You are major !}".\\
جرّب تغيير القيمة إلى 15 مثلا، سيصبح الشرط خاطئاً و بالتالي لن يُعرض شيء هذه المرّة.

استخدم هذه الشفرة لتجريب الأمثلة اللاحقة في هذا الفصل.

\subsubsection{مسألة نظافة}

الطريقة الّتي تفتح بها الحاضنات ليست مهمّة. سيعمل برنامجك إن كتبت كلّ شيء على نفس السطر. مثال :

\begin{Csource}
if (age >= 18) { printf("You are major !"); }
\end{Csource}

و على الرغم من أنّه ممكن، فهذا أمر
\textbf{غير منصوح به مطلقا}.\\
في الواقع، الكتابة على نفس السطر تجعل شفرتك صعبة القراءة. إذا لم تتعوّد من الآن على تهوية شفرتك، فلاحقا عندما تكتب شفرات كبيرة فستضيع بالتأكيد !

حاول عرض شفرتك بنفس طريقتي : حاضنة على سطر، ثمّ التعليمات (مسبوقة بجدولة 
(\textenglish{tabulation}))،
 ثمّ حاضنة الإغلاق على سطر آخر.

\begin{information}
توجد طرق عديدة لعرض الشفرة بشكل جيّد. هذا لا يغيّر في عمل البرنامج شيئا، لكنّها مسألة "نمط معلوماتيّ" إن أردت. إذا رأيت الشفرة شخص آخر معروضة بشكل مختلف قليلا، فهذا لأنّه يبرمج بنمط مختلف. الهدف من هذا كلّه هو أن تبقى الشفرة مهوّاة و مقروءة.
\end{information}

\subsection{الـ\texttt{else}
لكي نقول : و إلا}

الآن و بما أنّك تعرف كيف تقوم باختبار بسيط، سنذهب بعيدا : إن لم يعمل الشرط (كان خاطئا)، فسنطلب من الحاسوب تشغيل تعليمات أخرى.

هذا يشبه ما يلي : إن كان المتغير يساوي كذا فلنقم بكذا، و إلا فلنقم بكذا.

يكفي أن نضيف
\InlineCode{else}
بعد الحاضنة الأخيرة لأوامر الـ\InlineCode{if}،
مثلا :
\begin{Csource}
if (age >= 18)
{
	printf("You are major !");
}
else {
	printf("You are minor !");
}
\end{Csource}

الأمر سهل : إن كان المتغيّر
\InlineCode{age}
أكبر من أو يساوي 18 سنكتب على الشاشة 
"\textenglish{You are major !}"،
و إن لم يكن الأمر كذلك فسنكتب 
"\textenglish{You are minor !}".

\subsection{\texttt{else if}
لكي نقول : و إلا فإذا}

سنرى كيف نقوم بـ"إذا" و "إلّا". يمكن أيصا القيام بـ"و إلاّ فإذا" للقيام باختبار آخر في حالة ما إذا لم ينجح الأوّل. هذا الاختبار يوضع بين
\InlineCode{if}
و
\InlineCode{else}.

يمكن ترجمة ذلك بما يلي : إن كان المتغير يساوي كذا، فافعل كذا و إلا فإن كان يساوي كذا، فافعل كذا و إلا (جميع الحالات المتبقية)، افعل كذا.

الترجمة بلغة
\textenglish{C} :

\begin{Csource}
if (age >= 18)
{
	printf("You are major !");
}
else if (age > 4)
{
	printf("Well you're not too young anyway...");
}
else
{
	printf("Aga gaa aga gaaa");
	// Baby language, you can’t understand !
}
\end{Csource}

الجهاز يقوم بالاختبارات التالية بالترتيب :
\begin{itemize}
\item سيختبر الـ\InlineCode{if}
الأول، إن كان الشرط محققا، فسيقوم بتنفيذ التعليمات الموجودة بين الحاضنتين الأولتين.
\item إن لم يكن الشرط الأول محققا (يعني أننا في الـ\InlineCode{else if})
سيختبر الشرط الثاني، إن كان هذا الأخير محققا فإنه سينفذ التعليمات الموجودة بين الحاضنتين الثانيتين.
\item في حالة ما لم يكن الشرط الأول محققا و لا حتى الثاني، فإنه سينفذ التعليمات الموجودة بين الحاضنتين الأخيرتين.
\end{itemize}

\begin{information}
الـ\InlineCode{else}
و الـ\InlineCode{else if}
ليسلا ضروريّين. لإنشاء شرط، فقط
\InlineCode{if}
هو الضروري (هذا منطقي، و إلّا فكيف سيكون هناك شرط !).
\end{information}

لا حظ أنّه يمكننا أن نستعمل الكمّ الّذي نريده من الـ\InlineCode{else if}.

\subsection{عدّة شروط في مرّة واحدة}

قد يكون من المهم القيام بعدّة اختبارات في شرط واحد. مثلا، قد تريد اختبار ما إن كان العمر أكبر من 18 و العمر أصغر من 25.\\
لهذا علينا بتعلم رموز جديدة :

\begin{Table}{2}
الرمز & المعنى\\
\texttt{\&\&} & و \\
\texttt{||} & أو \\
\texttt{!} & لا (عكس الشرط)\\
\end{Table}

\subsubsection{الاختبار بالواو (\textenglish{and})}

لنختبر إن كان العمر في نفس الوقت أكبر من 18 و أقل من 25 يجب كتابة :

\begin{Csource}
if (age > 18 && age < 25)
\end{Csource}

\InlineCode{\&\&}
يعنيان "و". بالعربية هذا يعني : "إذا كان العمر أكبر من 18 و إذا كان العمر أصغر من 25".

\subsubsection{الاختبار بالأو (\textenglish{or})}

لاستخدام "أو"، يجب كتابة الرمزين
\InlineCode{||}.
لكتابة الرمز 
\InlineCode{|}،
نضغط في لوحة المفاتيح على
\InlineCode{Alt Gr} + \InlineCode{6}
(باعتبار أن تخطيط لوحة المفاتيح
\textenglish{AZERTY}
فرنسي). 

فلنعتبر برنامجا بسيطا، يختبر ما إن كان الشخص قادراً على فتح حساب بنكي او لا. فلكي يكون قادراً على ذلك يجب أن لا يكون شابّا كثيرا (فلنقل مثلا، ليس تحت 30 سنة) أو لديه الكثير من المال :

\begin{Csource}
if (age > 30 || argent > 100000)
{
	printf("Welcome to PicsouBank !");
}
else
{
	printf("Get out of my sight, miserable!");
}
\end{Csource}

الاختبار سيكون ناجحا فقط إذا كان الشخص بعمر أكبر من 30 سنة، أو على الأقل يملك مبلغاً أكبر من 100000 دينار مثلاً.

\subsubsection{الإختبار بـلا (\textenglish{not})}

الرمز الموافق لهذا الاختبار هو علامة التعجّب (!). في علوم الحاسوب، علامة التعجّب تعني "لا". يجب  وضع هذه العلامة من أجل عكس الشرط لقول  "إن لم يكن هذا صحيحا" :
\begin{Csource}
if (!(age < 18))
\end{Csource}

يمكن أن نترجم هذا إلى "إن كان الشخص غير قاصر". لو حذفنا
\InlineCode{!}
فسيعكس المعنى : "إن كان الشخص قاصرا".
\subsection{بعض الأخطاء التي يرتكبها المبتدؤون}

\subsubsection{لا تنس الإشارتين \texttt{==}}

مثلما قلت سابقا، لكي نختبر ما إن كان العمر يساوي 18 نكتب :

\begin{Csource}
if (age == 18)
{
	printf("You have just become major !");
}
\end{Csource}

\textbf{لا تنس}
وضع علامتي "يساوي" داخل
\InlineCode{if}،
هكذا :
\InlineCode{==}.

إن وضعت علامة 
\InlineCode{=}
واحدة فإن المتغير 
\InlineCode{age}
سيأخذ القيمة 18 (مثلما تعلمنا ذلك سابقا في درس المتغيرات). نحن نريد أن نختبر قيمة المتغير و ليس تغييرها فاحذر ! الكثير يقع في هذا الخطأ و بالتأكيد فبرامجهم لن تعمل بالشكل المطلوب !

\subsubsection{الفاصلة المنقوطة الزائدة}

بعض المبتدئين يقومون بإضافة فاصلة منقوطة في نهاية سطر الـ\InlineCode{if}، و لكن الـ\InlineCode{if} هو شرط و لا نضع فاصلة منقوطة إلّا في نهاية تعليمة. الشفرة التالية لن تعمل كما هو متوقّع لأنّه يوجد
\InlineCode{;}
في نهاية الشرط.

\begin{Csource}
if (age == 18); // Note the semicolon that mustn't be here
{
	printf("You are just major !");
}
\end{Csource}

\section{المتغيرات المنطقية (\textenglish{boolean})، أساس الشروط}
سندخل الآن في تفاصيل عمل شرط من نوع
\InlineCode{if... else}.\\
في الشروط نعتمد كثيراً على نوع آخر من أنواع البيانات نسميه الـ\textbf{\textenglish{boolean}}.

\subsection{بعض الأمثلة البسيطة للفهم}

سنبدأ ببعض التجارب قبل أن نقدّم هذا المفهوم. إليك شفرة مصدريّة بسيطة جدّا أقترح عليك تجريبها :

\begin{Csource}
if (1);
{
	printf("It is true !");
}
else
{
	printf("It is false !");
}
\end{Csource}

النتيجة : 

\begin{Console}
It is true !
\end{Console}

\begin{question}
لكن، لم نضع شرطا داخل
\InlineCode{if}،
هذا عدد فقط. مالّذي يعنيه ؟ لا معنى لهذا.
\end{question}

بلى، ستفهم. استبدل الواحد بالـصفر :

\begin{Csource}
if (0);
{
	printf("It is true !");
}
else
{
	printf("It is false !");
}
\end{Csource}

النتيجة :
\begin{Console}
It is false !
\end{Console}

حاول الآن استبدال الصفر بأي عدد صحيح، مثل 4، 15، 226، -10، -36، إلخ. النتيجة دائما :
"\textenglish{It is true !}".

\paragraph{ملخّص اختباراتنا}


إذا وضعنا 0، الاختبار سيعتبر خاطئا، أمّا إن وضعنا 1 أو أيّ عدد آخر، فالاختبار سيكون صحيحا.

\subsection{الشرح واجب}

في الواقع أنه في كلّ مرة تقوم فيها باختبار شرط، فإن الشرط سيقوم بارجاع القيمة 1 إن كان صحيحاً و القيمة 0 إن كان خاطئاً.

مثلا بالنسبة لهذا الشرط الّذي هو 
\InlineCode{age >= 18} :

\begin{Csource}
if (age >= 18)
\end{Csource}

لنفرض أن
\InlineCode{age}
كان 23. إذن، الشرط صحيح، و الحاسوب "سيستبدل" بطريقة ما
\InlineCode{age >= 18}
بالقيمة 1.\\
بعد ذلك، سيحصل الحاسوب (في رأسه) على
\InlineCode{if (1)}.
عندما يكون العدد 1، كما رأينا، فسيعتبره صحيحا.

بالمثل، إذا كان الشرط خاطئا، فسيستبدل
\InlineCode{age >= 18}
بالعدد 0، فالشرط خاطئ، و الحاسوب سيقرأ تعليمات
\InlineCode{else}.

\subsection{فلنجرب مع متغير}

فلنجرّب الآن شيئا آخر : وضع نتيجة الشرط في متغير، إن هذا الأمر ممكن مادام معتبراً من طرف الحاسوب كتعليمة.

\begin{Csource}
int age = 20;
int major = 0;

major = age >= 18;
printf("Major equals : %d\n", major);
\end{Csource}

كما تلاحظ فإن الشرط
\InlineCode{age >= 18}
أعطى 1 و بالتالي فإن المتغير 
\InlineCode{major}
أخذ القيمة 1 يعني صحيح. يمكنك التأكد بالـ\InlineCode{printf}.

قم بنفس الاختبار مع وضع
\InlineCode{age == 10}.
هذه المرّة،
\InlineCode{major}
سيكون 0.

\subsection{المتغير
\texttt{major}
متغير منطقي}

تذكّر هذا جيّدا : نقول عن متغيّر نجعله يأخذ القيم 1و 0 أنّه
\textbf{متغيّر منطقيّ}
(\textenglish{boolean}).

و هذا كما يلي :

\begin{itemize}
	\item 0 = خطأ،
	\item 1 = صحيح.
\end{itemize}

في الواقع 0 يمثّل خطأ، و كلّ الأعداد الأخرى تعني صحيح (كما رأينا سابقا). و لكن من أجل تبسيط الأمور، لن نستخدم سوى 0 و 1 لقول إن كان الشرط صحيحا أو خاطئا.

في لغة
\textenglish{C}
 لا يوجد نوع
\InlineCode{boolean}.\\
على الرغم من ذلك، يمكننا تغطية ذلك باستعمال النوع
\InlineCode{int}.

\subsection{المتغيرات المنطقية في الشروط}

عادة، نقوم باختبار
\InlineCode{if}
على متغيّر منطقيّ :

\begin{Csource}
int major = 1;
if (major)
{
	printf("You are major !");
}
else {
	printf("You are minor !");
}
\end{Csource}

بما أن المتغير
\InlineCode{major}
يساوي 1 فإن الشرط محقق و بالتالي سيظهر على الشاشة :
"\textenglish{You are major !}".

و هذا عمليّ جدّا، فالشرط أصبح مفهوما بشكل أفضل، فنقرأ
\InlineCode{if (major)}،
و الّذي يعني "إن كنت بالغاً". الشروط على المتغيّرات المنطقيّة هي إذن سهلة للقراءة و الفهم، ما دمت قد أعطيت أسماء واضحة لمتغيّراتك كما طلبت منك من البداية.

يمكننا أيضا أن نجد شفرة كالتالي :

\begin{Csource}
if (major && boy)
\end{Csource}

يعني "إن كان الشخص راشدا و ذكراً". في هذه الحالة، المتغير 
\InlineCode{boy}
أيضا هو متغير منطقي، يساوي 1 إذا كان الشخص ولداً و 0 إذا كان بنتاً. أعتقد أنك فهمت المقصود.

باختصار، المتغيرات المنطقية تسمح لنا بمعرفة ما إن كان الاختبار صحيحاً أم خاطئاً.\\
هذا مهمّ جدّا و ما شرحته لك سيمكّنك من فهم كثير من الأمور الّتي ستأتي لاحقا.

\begin{question}
سؤال صغير : إن كتبنا :
\InlineCode{if (major == 1)}
فسيعمل، أليس كذلك ؟
\end{question}

هذا صحيح، لكن مبدأ المتغيّرات هي أن نستطيع اختصار عبارة الشرط و جعلها أكثر قابليّة للقراءة. اعترف أنّ
\InlineCode{if (major)}
تُفهم أحسن، لا ؟

\paragraph{تذكّر إذن}
إذا كان متغيّرك يحمل عددا (مثل العمر)، قم باختبار من الشكل
\InlineCode{if (variable == 1)}.\\
بالمقابل،إذا كان المتغيّر منطقياّ، (أي إمّا 0 أو 1 لقول صحيح أو خطأ)، قم باختبار من الشكل
\InlineCode{if (variable)}.
